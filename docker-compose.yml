version: '2'
services:
  web:
    extends:
      file: common-services.yml
      service: frontend
    image: kth-docker-registry.sys.kth.se/kth-azure-app:0.15
    environment:
      # SERVICE_ID is used to create valid DNS entries for registrator -> SkyDNS
      SERVICE_ID : kth-azure-app-web
    dns: 10.1.1.100
    ports:
      - 3000
    depends_on:
      - redis

  redis:
    extends:
      file: common-services.yml
      service: backend
    image: redis:latest
    environment:
      SERVICE_ID : kth-azure-app-redis
    dns: 10.1.1.100
    ports:
      - 6379

#networks:
#  application_frontend:
#    driver: overlay
#  application_backend:
#    driver: overlay

